/* jsonrates.js v1.0.0 | Currency exchange rates API | jsonrates.com */
var JR=function(){var exports={},params={base:null,from:null,to:null,amount:null,inverse:null,date:null,dateStart:null,dateEnd:null};exports.base=function(base){return params.base=base,params.from=null,params.to=null,this},exports.from=function(from){return params.from=from,params.base=null,this},exports.to=function(to){return params.to=to,params.base=null,this},exports.amount=function(amount){return params.amount=amount,this},exports.inverse=function(inverse){return params.inverse=inverse,this},exports.date=function(date){return params.date=date,params.dateStart=null,params.dateEnd=null,this},exports.dateStart=function(dateStart){return params.dateStart=dateStart,params.date=null,this},exports.dateEnd=function(dateEnd){return params.dateEnd=dateEnd,params.date=null,this},exports.callback=function(reqid,endpoint,func,response){if(JREQUEST["delete"](reqid),"undefined"!=typeof response.error)throw"JR-ERROR: "+response.error;switch(endpoint){case"get":get.callback(func,response);break;case"convert":convert.callback(func,response);break;case"historical":historical.callback(func,response);break;case"locale":locale.callback(func,response)}};var get={perform:function(func){send("get",func,{base:params.base,from:params.from,to:params.to})},callback:function(func,rsp){var result="undefined"!=typeof rsp.rate?rsp.rate:rsp.rates;func(result)}},convert={perform:function(func){send("convert",func,{base:params.base,from:params.from,to:params.to,amount:params.amount,inverse:params.inverse})},callback:function(func,rsp){var result="undefined"!=typeof rsp.amount?rsp.amount:rsp.amounts;func(result)}},historical={perform:function(func){send("historical",func,{base:params.base,from:params.from,to:params.to,date:params.date,dateStart:params.dateStart,dateEnd:params.dateEnd})},callback:function(func,rsp){var result=rsp.rates;func(result)}},locale={perform:function(func){send("locale",func,{base:params.base,from:params.from,to:params.to})},callback:function(func,rsp){var result="undefined"!=typeof rsp.rate?rsp.rate:rsp.rates;func(result)}},send=function(endpoint,func,params){var url=JREQUEST.create(endpoint,func,params);JREQUEST.execute(url)};return exports.get=get.perform,exports.convert=convert.perform,exports.historical=historical.perform,exports.locale=locale.perform,exports}(),JREQUEST=function(){var ENDPOINT="http://jsonrates.com/{endpoint}/",CALLBACK_NAME="callback",exports={},cntr=0;exports.create=function(endpoint,func,params){params.callback=createCallback(endpoint,func);var query=buildQuery(params);return ENDPOINT.replace("{endpoint}",endpoint)+"?"+query},exports.execute=function(url){var script=document.createElement("script");script.src=url,document.head.appendChild(script)},exports["delete"]=function(reqid){var name=CALLBACK_NAME+reqid;delete JREQUEST[name]};var createCallback=function(endpoint,func){cntr++;var reqid=cntr,name=CALLBACK_NAME+reqid;return JREQUEST[name]=function(response){JR.callback(reqid,endpoint,func,response)},"JREQUEST."+name},buildQuery=function(params){var res="";for(var key in params){var value=params[key];null!==value&&(res=""!=res?res+"&":res,res=res+key+"="+value)}return res};return exports}();